<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="UTF-8">
  <title>Cauldron by conjurinc</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
  <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
</head>
<body>
  <section class="page-header">
    <h1 class="project-name">cauldron</h1>
    <h2 class="project-tagline">get your secrets <em>into</em> source control</h2>
    <a href="https://github.com/conjurinc/cauldron" class="btn">View on GitHub</a>
    <a href="https://github.com/conjurinc/cauldron/releases" class="btn">Download</a>
    <a href="#providerList" class="btn">Providers</a>
    <div id="byConjur">
      <span class="project-tagline">brewed by</span>
      <a href="http://www.conjur.net?utm_campaign=cauldron&utm_source=GitHub">
        <img src="https://developer.conjur.net/assets/conjur-logo_white-dd0793ef769fa0dbec2bb49a963f001d64f7e73d1939f521cfc17ef6a644e402.svg"/>
      </a>
    </div>
  </section>

  <section class="main-content">

    <h1>overview</h1>

<p>cauldron is a command-line tool that reads a file in secrets.yml format
and injects secrets as environment variables into any process. Once the
process exits, the secrets are gone.</p>

<div style="text-align: center">
<img src="//i.imgur.com/WkYo2wY.png"/>
</div>

<p>cauldron is not tied a particular secrets source. Instead, sources are implemented as providers
that cauldron calls to fetch values for secrets. Providers need only satisfy a simple contract
and can be written in any language.</p>

<p>Running cauldron looks like this:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">cauldron --provider conjur -f secrets.yml chef-client --once
</code></pre></div>
<p>Cauldron resolves the entries in <code>secrets.yml</code> with the <code>conjur</code> provider and
makes the secret values available to the environment of the command <code>chef-client --once</code>.
In our chef recipes we can access the secrets with Ruby&#39;s <code>ENV[&#39;...&#39;]</code> syntax.</p>

<p>This same pattern works for any tooling that can access environment variables.</p>

<p>Full usage docs for cauldron are in the
<a href="https://github.com/conjurinc/cauldron">Github README for the project</a>.</p>

<h2>secrets.yml</h2>

<p>secrets.yml defines a format for mapping an environment variable to a location
where a secret is stored. There are no sensitive values in this file itself. It can safely be checked into source control. Given a secrets.yml file, cauldron fetches the values
of the secrets from a provider and provide them as environment variables
for a specified process.</p>

<p>The format is basic YAML two custom tags. Each line looks like this:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;key&gt;: !&lt;tag&gt; &lt;path&gt;
</code></pre></div>
<p><code>key</code> is the name of the environment variable you wish to set.</p>

<p><code>tag</code> sets a context for interpretation:</p>

<ul>
<li><p><code>!var</code> sets the value of <code>key</code> to the the secret&#39;s value, resolved by a provider given <code>path</code>.</p></li>
<li><p><code>!file</code> writes the value of <code>path</code>, a literal string, to a memory-mapped temporary
file and sets the value of <code>key</code> to the file&#39;s path.</p></li>
<li><p><code>!var:file</code> is a combination of the two. It will use a provider to fetch the value of a secret
located at <code>path</code>, write it to a temp file and set <code>key</code> to the file&#39;s path.</p></li>
<li><p>If there is no tag, <code>&lt;path&gt;</code> is treated as a literal string and set as the value of <code>key</code>.</p></li>
</ul>

<p>Here is an example:</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">AWS_ACCESS_KEY_ID</span><span class="p-Indicator">:</span> <span class="kt">!var</span> <span class="l-Scalar-Plain">aws/$environment/iam/user/robot/access_key_id</span>
<span class="l-Scalar-Plain">AWS_SECRET_ACCESS_KEY</span><span class="p-Indicator">:</span> <span class="kt">!var</span> <span class="l-Scalar-Plain">aws/$environment/iam/user/robot/secret_access_key</span>
<span class="l-Scalar-Plain">AWS_REGION</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">us-east-1</span>
<span class="l-Scalar-Plain">SSL_CERT</span><span class="p-Indicator">:</span> <span class="kt">!var</span><span class="l-Scalar-Plain">:file ssl/certs/private</span>
</code></pre></div>
<p><code>$environment</code> is an example of a variable, given as an flag argument when running cauldron.</p>

<h1>providers</h1>

<p><i id="providerList"></i></p>

<ul>
<li><a href="https://github.com/conjurinc/cauldron-conjurcli">conjurcli</a> - Conjur CLI (for backwards compatibility)</li>
<li><a href="https://github.com/conjurinc/cauldron-keychain-cli">osxkeychain</a> - OSX Keychain</li>
</ul>

<p>Providers are easy to write. Given the path to a secret, they either return its value or an error.</p>

<p>This is their contract:</p>

<ul>
<li>They take one argument, the path to where a secret is stored (a string).</li>
<li>If retrieval is successful, they return the value on stdout with exit code 0.</li>
<li>If an error occurs, they return an error message on stderr and a non-0 exit code.</li>
</ul>

<p>The default path for providers is <code>/usr/libexec/cauldron/</code>. If one provider is in that path,
cauldron will use it. If multiple providers are in the path, you can specify which one to use
with the <code>--provider</code> flag or the environment variable <code>CAULDRON_PROVIDER</code>. If your providers are
placed outside the default path, give cauldron the full path to them.</p>

<p><a href="https://github.com/conjurinc/cauldron/issues">Open a Github issue</a> if you&#39;d like to include your provider on this page.</p>


    <footer class="site-footer">
      <span class="site-footer-owner">
        <a href="https://github.com/conjurinc/cauldron">Cauldron</a>
        is maintained by
        <a href="https://github.com/conjurinc">conjurinc</a>.
      </span>
      <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
    </footer>
  </section>
</body>
</html>